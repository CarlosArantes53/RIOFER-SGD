{% extends "layout.html" %}

{% block title %}Pedidos{% endblock %}

{% block content %}
    <h1>Pedidos para Picking</h1>
    
    <table class="table-users">
        <thead>
            <tr>
                <th>Cliente</th>
                <th>Nome do Cliente</th>
                <th>Tipo de Entrega</th>
                <th>Cidade</th>
                <th>LocalizaÃ§Ã£o</th>
                <th>Status</th>
                <th>AÃ§Ãµes</th>
            </tr>
        </thead>
        <tbody>
            {% for pedido in pedidos %}
            <tr>
                <td>{{ pedido.CardCode }}</td>
                <td>{{ pedido.CardName }}</td>
                <td>
                    {% if pedido['U_TU_QuemEntrega'] == '01' %}
                        ðŸšš Entrega
                    {% elif pedido['U_TU_QuemEntrega'] == '02' %}
                        ðŸ“¦ Retirada
                    {% else %}
                        {{ pedido['U_TU_QuemEntrega'] }}
                    {% endif %}
                </td>
                <td>{{ pedido.U_GI_Cidade }}</td>
                <td>{{ pedido.Localizacao }}</td>
                <td>{{ pedido.Status }}</td>
                <td>
                    <a href="{{ url_for('pedidos.visualizar_picking', abs_entry=pedido.AbsEntry, localizacao=pedido.Localizacao) }}" class="btn">Visualizar picking</a>
                    {% if pedido.Status == 'Finalizado' %}
                        <a href="{{ url_for('pedidos.iniciar_separacao', abs_entry=pedido.AbsEntry, localizacao=pedido.Localizacao) }}" class="btn">Editar SeparaÃ§Ã£o</a>
                    {% elif pedido.UserInSeparation and pedido.UserInSeparation != session.user['email'] %}
                        <button class="btn" disabled>Em separaÃ§Ã£o</button>
                    {% else %}
                        <a href="{{ url_for('pedidos.iniciar_separacao', abs_entry=pedido.AbsEntry, localizacao=pedido.Localizacao) }}" class="btn">Iniciar SeparaÃ§Ã£o</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}