{% extends "layout.html" %}

{% block title %}Packing do Pedido {{ abs_entry }} - {{ localizacao }}{% endblock %}

{% block content %}
    <h1>Packing do Pedido {{ abs_entry }} - Localização {{ localizacao }}</h1>
    <form method="post">
        
        {% for pacote in pacotes %}
        <div class="box-container" style="margin-bottom: 20px;">
            <h3>Pacote {{ pacote.id }}</h3>
            <p><strong>Peso Registrado no Picking:</strong> {{ "%.2f"|format(pacote.peso_original) }} kg</p>

            <table class="table-users" style="margin-top: 1rem; margin-bottom: 1.5rem;">
                <thead>
                    <tr>
                        <th>Cód. Item</th>
                        <th>Descrição</th>
                        <th>Quantidade</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in pacote.itens %}
                    <tr>
                        <td>{{ item.ItemCode }}</td>
                        <td>{{ item.ItemName }}</td>
                        <td>{{ item.Quantity }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            
            <div class="input-group">
                <label for="peso_pacote_{{ pacote.id }}"><strong>Peso Conferido (kg):</strong></label>
                <input type="number" step="any" id="peso_pacote_{{ pacote.id }}" name="peso_pacote_{{ pacote.id }}" required class="input-group input">
            </div>

            <div class="input-group">
                 <input type="checkbox" id="confirm_pacote_{{ pacote.id }}" name="confirm_pacote_{{ pacote.id }}" value="1" style="margin-right: 10px;">
                 <label for="confirm_pacote_{{ pacote.id }}">Confirmar Pacote</label>
            </div>
        </div>
        {% endfor %}

        <div style="margin-top: 30px;">
            <button type="submit" class="btn">Finalizar Packing da Localização</button>
            <a href="{{ url_for('packing.listar_packing') }}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
{% endblock %}